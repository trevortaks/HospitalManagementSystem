@page "/patients"
@using HospitalManagementSystem.WebApp.Models
@using HospitalManagementSystem.WebApp.Services
@inject IPatientService PatientService

<h3>Patients</h3>

@if (patients == null)
{
    <MudProgressCircular Indeterminate="true" Color="Color.Primary" />
}
else if (!patients.Any())
{
    <MudText>No patients found.</MudText>
}
else
{
    <MudTable Items="patients" Hover="true">
        <HeaderContent>
            <MudTh>ID</MudTh>
            <MudTh>Name</MudTh>
            <MudTh>Age</MudTh>
            <MudTh>Gender</MudTh>
            <MudTh>Contact</MudTh>
        </HeaderContent>
        <RowTemplate>
            <MudTd DataLabel="ID">@context.PatientId</MudTd>
            <MudTd DataLabel="Name">@context.FirstName @context.LastName</MudTd>
            <MudTd DataLabel="Age">@context.Age</MudTd>
            <MudTd DataLabel="Gender">@context.Gender</MudTd>
            <MudTd DataLabel="Contact">@context.ContactNumber</MudTd>
        </RowTemplate>
    </MudTable>
}

@code{
    private List<PatientModel>? patients;

    protected override async Task OnInitializedAsync()
    {
        patients = (await PatientService.GetAllPatientsAsync()).ToList();
    }
}

